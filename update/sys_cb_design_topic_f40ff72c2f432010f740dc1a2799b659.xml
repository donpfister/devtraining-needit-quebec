<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_ritm_add_comments_">f40ff72c2f432010f740dc1a2799b656</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"5555b0637834411094ae9956a948ddf3","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"5555b0637834411094ae9956a948ddf3"}],"goals":[{"name":"primary","trigger_id":"5555b0637834411094ae9956a948ddf3","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":""},"id":"7ae8d65ce09a4d4193115c2c5d8fd977","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"8499339ccb0a4da2b6ba70cf5f98643f","name":"End"},{"type":"ScriptedAction","script":"(function execute() {\n\n    vaVars.table_name = JSON.parse(vaVars.global_notification_context.toString())['tableName'];\n    vaVars.sys_id = JSON.parse(vaVars.global_notification_context.toString())['tableSysId'];\n\n    var gr = new GlideRecord(vaVars.table_name);\n    gr.get(vaVars.sys_id);\n    var ritm_number = gr.number;\n    vaVars.ritm_number = gs.getMessage(\"Go to {0}\", ritm_number);\n    vaVars.link = gs.getProperty('glide.servlet.uri') + gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url') + \"?sys_id=\" + vaVars.sys_id + \"&amp;id=ticket&amp;table=\" + vaVars.table_name;\n\n})()\n","id":"907f8227a02a4d5aa770cbd43c9c8add","name":"Get requested item details","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"read","read_mode":"variable","query":"sys_id={{vaVars.sys_id}}","variable_id":"e8513b0995924262ba2adf60d4d5e24e","id":"68e0aaf9dd2a4172b1a13bac54f5d0c1","name":"Lookup requested item record","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":"sys_id={{vaVars.sys_id}}"}},{"type":"CRUDAction","mode":"update","query":"comments={{vaInputs.add_comment}}","variable_id":"e8513b0995924262ba2adf60d4d5e24e","id":"08fab491580a450dbb793d319b1327e8","name":"Add comment to requested item","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessageLang(\"OK, I've added your comments.\", vaContext.getRequesterLang())"},"id":"61981eb3727d405ebc5aeab13b8b7f8d","name":"Confirmation","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"InputPrompt","variable_id":"6553698c1a924fefa53ba1f7eeccbc68","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Type in your comments and I'll add them.\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"30602254bcfd48638dadeb1682b03e5d","name":"Add comment","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"ScriptOutputPrompt","output_type":"single_part","id":"301dc747964046c8bae0a50f1aab1376","name":"Requested item link","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","mode":"string","value":"(function execute() {\n\n    var array = [\" **[\", vaVars.ritm_number, \"](\", vaVars.link, \")** \"];\n    vaVars.ritm_link = array.join(\"\");\n    return vaVars.ritm_link;\n\n})()"},"secure":false}],"edges":[{"type":"Edge","source_node_id":"7ae8d65ce09a4d4193115c2c5d8fd977","target_node_id":"907f8227a02a4d5aa770cbd43c9c8add","id":"dd08243978b3416e8c0ad23e7db0fa68"},{"type":"Edge","source_node_id":"68e0aaf9dd2a4172b1a13bac54f5d0c1","target_node_id":"08fab491580a450dbb793d319b1327e8","id":"a8257e8d589649e2a264a1d91a016a3f"},{"type":"Edge","source_node_id":"08fab491580a450dbb793d319b1327e8","target_node_id":"61981eb3727d405ebc5aeab13b8b7f8d","id":"b6953257ec06449c9503fcfcccad9697"},{"type":"Edge","source_node_id":"61981eb3727d405ebc5aeab13b8b7f8d","target_node_id":"8499339ccb0a4da2b6ba70cf5f98643f","id":"02cc6edb71de4080816debacdc0392be"},{"type":"Edge","source_node_id":"30602254bcfd48638dadeb1682b03e5d","target_node_id":"68e0aaf9dd2a4172b1a13bac54f5d0c1","id":"9ce8ddc991ae402eb4832d93b0ee4989"},{"type":"Edge","source_node_id":"907f8227a02a4d5aa770cbd43c9c8add","target_node_id":"301dc747964046c8bae0a50f1aab1376","id":"d395e2e168304908894d0bbf0334fddc"},{"type":"Edge","source_node_id":"301dc747964046c8bae0a50f1aab1376","target_node_id":"30602254bcfd48638dadeb1682b03e5d","id":"cdbdad7c31a8426ab696e3a6a2385d3a"}],"id":"primary"}],"script_variables":[{"type":"String","name":"table_name","value":{"type":"String","mode":"string"},"id":"48e418f935794d48ba206f938fc39781","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"sys_id","value":{"type":"String","mode":"string"},"id":"6106c66ac79040a4a3714ec7fa9c4db6","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"ritm_link","value":{"type":"String","mode":"string"},"id":"4bcd8a5d22fe444881178d1a01bdd823","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"link","value":{"type":"String","mode":"string"},"id":"351d48e347274b629b85e713e40c53a4","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"ritm_number","value":{"type":"String","mode":"string"},"id":"e9c3bedaf5634e0f8d1c388231cf1209","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"ff97beb2731745dd98faa4311d78ba25","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"sc_req_item","id":"a515927565a04b0c9ecf6cad7796328a","name":"add_comment_to_requested_item","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"sc_req_item","id":"e8513b0995924262ba2adf60d4d5e24e","name":"lookup_requested_item_record","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"add_comment","id":"6553698c1a924fefa53ba1f7eeccbc68","formatType":"Text","validationScript":"","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"134450a0b3781300787162ac16a8dc1e","domain":"global","topic_type":"STANDARD","channels":[],"id":"bec2cef0c34220108940d2bf6d40dd8c","name":"_PRVW__600fb7a89b4320102cc7d40891c4c476","key_phrases":["_ritm_add_comments_"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_categories":[{"name":null,"visible":false,"sysId":"5ca81c5a7331201083c1e0dbc4f6a7f8"}],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>bec2cef0c34220108940d2bf6d40dd8c</design_topic_id>
        <name>_PRVW__600fb7a89b4320102cc7d40891c4c476</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-03-19 14:20:16</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>f40ff72c2f432010f740dc1a2799b659</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cb_design_topic_f40ff72c2f432010f740dc1a2799b659</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-03-19 14:20:16</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
